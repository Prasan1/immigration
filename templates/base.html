<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- SEO Meta Tags -->
    <title>{% block title %}Immigration Templates - Simplify Your Immigration Journey{% endblock %}</title>
    <meta name="description" content="{% block description %}Professional immigration form templates, checklists, and document preparation tools. I-130, I-485, N-400 and more. USCIS-compliant resources for your immigration process.{% endblock %}">
    <meta name="keywords" content="immigration forms, I-130, I-485, N-400, USCIS forms, immigration checklists, green card application, naturalization, visa forms">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">

    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* RankSewa-inspired clean palette */
            --brand-primary: #0284c7;
            --brand-secondary: #0d9488;
            --brand-accent: #10b981;
            --text-dark: #0f172a;
            --text-gray: #64748b;
            --text-muted: #94a3b8;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --border-light: #e2e8f0;
            --verified-green: #10b981;
            --warning-amber: #f59e0b;
        }

        body {
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: #f8fafc;
            color: var(--text-dark);
        }

        main {
            flex: 1;
        }

        h1, h2, h3, .navbar-brand {
            font-family: 'Fraunces', Georgia, serif;
            color: var(--text-dark);
        }

        img {
            max-width: 100%;
            height: auto;
        }

        /* Verification Badge */
        .verified-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #d1fae5;
            color: #065f46;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .verified-badge i {
            color: var(--verified-green);
        }

        /* Professional Footer */
        .site-footer {
            margin-top: 80px;
            padding: 64px 0 32px;
            background: #0f172a;
            border-top: 3px solid var(--brand-primary);
        }

        .site-footer .footer-content {
            max-width: 1240px;
            margin: 0 auto;
            padding: 0 40px;
        }

        .site-footer .footer-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1.2fr;
            gap: 48px;
            margin-bottom: 48px;
        }

        .site-footer .footer-column h3 {
            font-size: 1.6rem;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 12px;
            letter-spacing: -0.01em;
        }

        .site-footer .footer-tagline {
            font-size: 0.95rem;
            color: #f1c27d;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 16px;
        }

        .site-footer .footer-description {
            color: #cbd5e1;
            font-size: 0.95rem;
            line-height: 1.7;
            font-weight: 400;
        }

        .site-footer .footer-column h4 {
            font-size: 0.85rem;
            font-weight: 700;
            color: #ffffff;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 20px;
        }

        .site-footer .footer-links,
        .site-footer .footer-contact {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .site-footer .footer-links li {
            margin-bottom: 12px;
        }

        .site-footer .footer-links a,
        .site-footer .footer-contact a {
            color: #cbd5e1;
            text-decoration: none;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .site-footer .footer-links a:hover {
            color: #f1c27d;
            padding-left: 4px;
        }

        .site-footer .footer-contact li {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 14px;
        }

        .site-footer .footer-contact i {
            color: #f1c27d;
            font-size: 1rem;
        }

        .site-footer .footer-contact a:hover {
            color: #f1c27d;
        }

        .site-footer .footer-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 32px;
            border-top: 1px solid #475569;
        }

        .site-footer .footer-copyright {
            color: #94a3b8;
            font-size: 0.9rem;
            margin: 0;
            font-weight: 500;
        }

        .site-footer .footer-copyright a {
            color: #cbd5e1;
        }

        /* Trust Badges Section */
        .site-footer .footer-trust-badges {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 24px;
            padding: 32px 0;
            margin-top: 32px;
            border-top: 1px solid #475569;
            border-bottom: 1px solid #475569;
        }

        .site-footer .trust-badge-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #cbd5e1;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .site-footer .trust-badge-item i {
            color: #f1c27d;
            font-size: 1.1rem;
        }

        .site-footer .trust-badge-item strong {
            color: #ffffff;
            font-weight: 700;
        }

        /* Responsive Footer */
        @media (max-width: 1024px) {
            .site-footer .footer-grid {
                grid-template-columns: 1fr 1fr;
                gap: 40px;
            }

            .site-footer .footer-brand {
                grid-column: 1 / -1;
            }
        }

        @media (max-width: 768px) {
            .site-footer {
                margin-top: 60px;
                padding: 48px 0 32px;
            }

            .site-footer .footer-content {
                padding: 0 24px;
            }

            .site-footer .footer-grid {
                grid-template-columns: 1fr;
                gap: 32px;
            }

            .site-footer .footer-brand {
                grid-column: 1;
            }

            .site-footer .footer-bottom {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }

            .site-footer .footer-copyright {
                font-size: 0.85rem;
            }

            .site-footer .footer-trust-badges {
                gap: 16px;
                padding: 24px 0;
            }

            .site-footer .trust-badge-item {
                font-size: 0.85rem;
            }

            .site-footer .trust-badge-item i {
                font-size: 1rem;
            }
        }
    </style>
    {% block head %}{% endblock %}

    <style>
        /* Clean, Professional Navbar */
        .navbar {
            background: #ffffff !important;
            border-bottom: 1px solid var(--border-light);
            box-shadow: 0 1px 3px rgba(15, 23, 42, 0.05);
            padding: 1rem 0;
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.35rem;
            color: var(--text-dark) !important;
            letter-spacing: -0.02em;
        }

        .navbar .nav-link {
            color: var(--text-gray) !important;
            font-weight: 500;
            font-size: 0.95rem;
            transition: color 0.2s ease;
            border-radius: 6px;
            padding: 0.5rem 1rem !important;
        }

        .navbar .nav-link:hover {
            color: var(--brand-primary) !important;
            background: rgba(2, 132, 199, 0.08);
        }

        .navbar .nav-link.active {
            color: var(--brand-primary) !important;
            font-weight: 600;
        }

        .btn-primary {
            background: var(--brand-primary);
            border: none;
            font-weight: 600;
            padding: 0.6rem 1.5rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            background: #0369a1;
            box-shadow: 0 4px 12px rgba(2, 132, 199, 0.25);
        }

        @media (max-width: 768px) {
            .navbar .nav-link {
                padding: 0.4rem 0.75rem !important;
            }
        }
    </style>
</head>
<body>
    <!-- Clerk Authentication -->
    <script
        async
        crossorigin="anonymous"
        data-clerk-publishable-key="{{ config.CLERK_PUBLISHABLE_KEY }}"
        src="https://accounts.clerk.com/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"
        type="text/javascript"
    ></script>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="/">
                {% if g.branding.logo_url %}
                <img src="{{ g.branding.logo_url }}" alt="{{ g.branding.site_name }}" style="height: 40px; margin-right: 10px;">
                {% else %}
                <i class="fas fa-passport me-2"></i>
                {% endif %}
                {{ g.branding.site_name }}
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <a class="nav-link {% block nav_home_active %}{% endblock %}" href="/">
                            <i class="fas fa-home me-1"></i>Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% block nav_forms_active %}{% endblock %}" href="/forms">
                            <i class="fas fa-file-alt me-1"></i>Forms
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% block nav_templates_active %}{% endblock %}" href="/templates">
                            <i class="fas fa-edit me-1"></i>Templates
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% block nav_compressor_active %}{% endblock %}" href="/file-compressor">
                            <i class="fas fa-file-archive me-1"></i>Compressor
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% block nav_pricing_active %}{% endblock %}" href="/pricing">
                            <i class="fas fa-tags me-1"></i>Pricing
                        </a>
                    </li>
                    {% if user %}
                    <li class="nav-item">
                        <span class="navbar-text me-3" style="background: #f0f9ff; padding: 0.4rem 1rem; border-radius: 20px; font-size: 0.9rem; color: var(--text-dark); border: 1px solid #bae6fd;">
                            <i class="fas fa-user-circle me-2" style="color: var(--brand-primary);"></i>{{ user.full_name or user.email.split('@')[0] }}
                            <span class="badge" style="background: var(--brand-secondary); color: white; margin-left: 0.5rem;">{{ user.subscription_tier.title() }}</span>
                        </span>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% block nav_dashboard_active %}{% endblock %}" href="/dashboard">
                            <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                        </a>
                    </li>
                    {% if user.subscription_tier == 'enterprise' %}
                    <li class="nav-item">
                        <a class="nav-link" href="/enterprise/settings">
                            <i class="fas fa-cog me-1"></i>Settings
                        </a>
                    </li>
                    {% endif %}
                    <li class="nav-item">
                        <button class="btn btn-outline-danger btn-sm ms-2" id="logoutBtn">
                            <i class="fas fa-sign-out-alt me-1"></i>Logout
                        </button>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <button class="btn btn-primary btn-sm ms-3" id="loginBtn">
                            <i class="fas fa-sign-in-alt me-1"></i>Sign In
                        </button>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Professional Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-grid">
                <!-- Company Info -->
                <div class="footer-column footer-brand">
                    <h3>Immigration Templates</h3>
                    <p class="footer-tagline">Simplifying Your Immigration Journey</p>
                    <p class="footer-description">
                        Professional immigration form templates, comprehensive checklists, and document preparation tools. Access USCIS-compliant resources for I-130, I-485, N-400, and more. Expert guidance for every step of your immigration process.
                    </p>
                </div>

                <!-- Quick Links -->
                <div class="footer-column">
                    <h4>Product</h4>
                    <ul class="footer-links">
                        <li><a href="/forms">Forms Library</a></li>
                        <li><a href="/templates">Templates</a></li>
                        <li><a href="/file-compressor">File Compressor</a></li>
                        <li><a href="/pricing">Pricing</a></li>
                    </ul>
                </div>

                <!-- Legal Links -->
                <div class="footer-column">
                    <h4>Legal</h4>
                    <ul class="footer-links">
                        <li><a href="/terms">Terms of Service</a></li>
                        <li><a href="/privacy">Privacy Policy</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                    </ul>
                </div>

                <!-- Contact Info -->
                <div class="footer-column">
                    <h4>Contact</h4>
                    <ul class="footer-contact">
                        <li>
                            <i class="bi bi-envelope"></i>
                            <a href="mailto:support@immigrationtemplates.com">support@immigrationtemplates.com</a>
                        </li>
                        <li>
                            <i class="bi bi-globe"></i>
                            <a href="https://www.immigrationtemplates.com" target="_blank">Visit Website</a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Trust Badges -->
            <div class="footer-trust-badges">
                <div class="trust-badge-item">
                    <i class="bi bi-lock-fill"></i>
                    <span>SSL Secured</span>
                </div>
                <div class="trust-badge-item">
                    <i class="bi bi-credit-card-fill"></i>
                    <span>Powered by Stripe</span>
                </div>
                <div class="trust-badge-item">
                    <i class="bi bi-file-earmark-text-fill"></i>
                    <span>USCIS Resources</span>
                </div>
                <div class="trust-badge-item">
                    <i class="bi bi-shield-check"></i>
                    <span>Secure & Compliant</span>
                </div>
            </div>

            <!-- Legal Disclaimer Banner -->
            <div style="background: rgba(248, 250, 252, 0.08); border: 1px solid rgba(203, 213, 225, 0.4); border-radius: 12px; padding: 24px; margin: 32px 0; text-align: center;">
                <div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 12px;">
                    <i class="fas fa-exclamation-triangle" style="color: #f1c27d; font-size: 1.5rem;"></i>
                    <h4 style="margin: 0; color: #e2e8f0; font-weight: 700; font-size: 1.1rem;">Important legal disclaimer</h4>
                </div>
                <p style="color: #cbd5f5; font-size: 0.95rem; line-height: 1.7; margin: 0; max-width: 900px; margin: 0 auto; font-weight: 500;">
                    <strong>ImmigrationTemplates.com is a software tool, not a law firm.</strong> We do not provide legal advice, representation, or immigration consulting services. Our checklists, templates, and tools are for informational purposes only and do not constitute legal advice. You are solely responsible for your own immigration application and decisions. We strongly recommend consulting with a licensed immigration attorney for case-specific guidance. By using this service, you acknowledge that ImmigrationTemplates.com is not liable for any outcomes related to your immigration case.
                </p>
            </div>

            <!-- Footer Bottom -->
            <div class="footer-bottom">
                <p class="footer-copyright">
                    © 2024 Immigration Templates. All rights reserved. • <strong style="color: #64748b;">Not Legal Advice</strong> • <a href="/terms" style="color: #64748b; text-decoration: none;">Terms of Service</a> • <a href="/privacy" style="color: #64748b; text-decoration: none;">Privacy Policy</a>
                </p>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <!-- Login/Logout Handlers -->
    <script>
        // Login handler
        if (document.getElementById('loginBtn')) {
            document.getElementById('loginBtn').addEventListener('click', async function() {
                if (typeof Clerk !== 'undefined') {
                    Clerk.load().then(clerk => {
                        clerk.openSignIn({
                            redirectUrl: window.location.href
                        });
                    });
                } else {
                    window.location.href = '/login';
                }
            });
        }

        // Logout handler
        if (document.getElementById('logoutBtn')) {
            document.getElementById('logoutBtn').addEventListener('click', async function() {
                try {
                    // Logout from Flask
                    await fetch('/api/auth/logout', { method: 'POST' });

                    // Sign out from Clerk if available
                    if (typeof Clerk !== 'undefined') {
                        Clerk.load().then(clerk => {
                            clerk.signOut().then(() => {
                                window.location.href = '/';
                            });
                        });
                    } else {
                        window.location.href = '/';
                    }
                } catch (error) {
                    console.error('Logout error:', error);
                    window.location.href = '/';
                }
            });
        }
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
