<!DOCTYPE html>
<html lang="en">
<head>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extreme Hardship Worksheet</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>

        .navbar {
            background: white !important;
            border-bottom: 2px solid transparent;
            border-image: linear-gradient(to right, #b45309, #0f766e) 1;
            box-shadow: 0 4px 12px rgba(15, 23, 42, 0.08);
        }

        .navbar-brand {
            font-family: 'Fraunces', Georgia, serif;
            font-weight: 800;
            color: #0f172a !important;
        }

        .navbar .nav-link {
            color: #475569 !important;
            font-weight: 600;
            border-radius: 8px;
            padding: 0.5rem 1rem !important;
        }

        .navbar .nav-link:hover {
            color: #b45309 !important;
            background: rgba(180, 83, 9, 0.12);
        }

        .navbar-toggler {
            border: none;
        }

        .navbar-toggler:focus {
            box-shadow: none;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #000;
        }

        .container {
            max-width: 8.5in;
            margin: 0 auto;
            padding: 0.75in;
        }

        .form-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 20px;
        }

        .form-header h1 {
            font-size: 22px;
            font-weight: bold;
            color: #e74c3c;
        }

        input[type="text"], input[type="number"], textarea {
            border: 1px solid #ccc;
            padding: 8px;
            font-family: 'Arial', sans-serif;
            font-size: 14px;
            width: 100%;
        }

        textarea {
            min-height: 80px;
            resize: vertical;
        }

        .section-title {
            background: #f8d7da;
            padding: 12px;
            font-weight: bold;
            margin-top: 25px;
            margin-bottom: 15px;
            border-left: 5px solid #e74c3c;
            color: #721c24;
        }

        .subsection {
            background: #f1f5f9;
            padding: 10px;
            margin: 15px 0;
            border-left: 3px solid #94a3b8;
        }

        .action-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .btn-action {
            background: #b45309;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(180, 83, 9, 0.3);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
        }

        .btn-action:hover {
            background: #5568d3;
            color: white;
        }

        .btn-home {
            background: #28a745;
        }

        .btn-home:hover {
            background: #218838;
        }

        @media print {
            .action-buttons, .print-hide {
                display: none !important;
            }
            body {
                margin: 0;
                padding: 0;
            }
            .container {
                max-width: 100%;
                padding: 0.5in;
            }
        }

        .checklist-item {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        table, th, td {
            border: 1px solid #000;
        }

        th, td {
            padding: 8px;
            text-align: left;
        }

        th {
            background: #f0f0f0;
            font-weight: bold;
        }

        .score-box {
            background: #e7f3ff;
            border: 2px solid #b45309;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
        }

        /* Share Menu Styles */
        .share-menu {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            z-index: 1001;
            min-width: 250px;
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        .share-menu.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .share-menu-header {
            padding: 16px 20px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: #1f2937;
        }

        .share-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #6b7280;
            cursor: pointer;
            padding: 0;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }

        .share-close:hover {
            background: #f3f4f6;
            color: #1f2937;
        }

        .share-options {
            padding: 8px;
        }

        .share-option {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            color: #374151;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s;
            gap: 12px;
        }

        .share-option:hover {
            background: #f3f4f6;
            color: #b45309;
        }

        .share-option i {
            font-size: 20px;
            width: 24px;
            text-align: center;
        }

        .share-option .fa-linkedin {
            color: #0077b5;
        }

        .share-option .fa-twitter {
            color: #1da1f2;
        }

        .share-option .fa-facebook {
            color: #1877f2;
        }

        .share-option .fa-whatsapp {
            color: #25d366;
        }

        .share-option .fa-envelope {
            color: #ea4335;
        }

        .share-option .fa-link {
            color: #6b7280;
        }

        @media print {
            .share-menu {
                display: none !important;
            }
        }
    
        @media screen {
            .container {
                padding-top: 24px;
                padding-bottom: 24px;
            }
        }
</style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-light print-hide">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-passport me-2"></i>
                {{ g.branding.site_name }}
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <a class="nav-link" href="/">
                            <i class="fas fa-home me-1"></i>Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/forms">
                            <i class="fas fa-file-alt me-1"></i>Forms
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/templates">
                            <i class="fas fa-edit me-1"></i>Templates
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/file-compressor">
                            <i class="fas fa-file-archive me-1"></i>Compressor
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/pricing">
                            <i class="fas fa-tags me-1"></i>Pricing
                        </a>
                    </li>
                    {% if user %}
                    <li class="nav-item">
                        <a class="nav-link" href="/dashboard">
                            <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                        </a>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="/login">
                            <i class="fas fa-sign-in-alt me-1"></i>Sign In
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <div class="action-buttons">
        <a href="/" class="btn-action btn-home">
            <i class="fas fa-home me-2"></i>Home
        </a>
        <button class="btn-action" onclick="window.print()">
            <i class="fas fa-print me-2"></i>Print
        </button>
        <button class="btn-action" onclick="window.print()">
            <i class="fas fa-file-pdf me-2"></i>Save PDF
        </button>
        <button class="btn-action" onclick="toggleShareMenu()">
            <i class="fas fa-share-alt me-2"></i>Share
        </button>
    </div>

    <!-- Share Menu -->
    <div id="shareMenu" class="share-menu">
        <div class="share-menu-header">
            <span>Share this form template</span>
            <button class="share-close" onclick="toggleShareMenu()">&times;</button>
        </div>
        <div class="share-options">
            <a href="#" class="share-option" onclick="shareOn('linkedin')">
                <i class="fab fa-linkedin"></i>
                <span>LinkedIn</span>
            </a>
            <a href="#" class="share-option" onclick="shareOn('twitter')">
                <i class="fab fa-twitter"></i>
                <span>Twitter</span>
            </a>
            <a href="#" class="share-option" onclick="shareOn('facebook')">
                <i class="fab fa-facebook"></i>
                <span>Facebook</span>
            </a>
            <a href="#" class="share-option" onclick="shareOn('whatsapp')">
                <i class="fab fa-whatsapp"></i>
                <span>WhatsApp</span>
            </a>
            <a href="#" class="share-option" onclick="shareOn('email')">
                <i class="fas fa-envelope"></i>
                <span>Email</span>
            </a>
            <a href="#" class="share-option" onclick="copyLink()">
                <i class="fas fa-link"></i>
                <span>Copy Link</span>
            </a>
        </div>
    </div>

    <div class="container">
        <div class="form-header">
            <h1><i class="fas fa-clipboard-list me-2"></i>EXTREME HARDSHIP ANALYSIS WORKSHEET</h1>
            <p style="font-size: 14px; margin-top: 10px; color: #666;">
                For I-601 / I-601A Waiver Applications
            </p>
        </div>

        <div style="background: #dc3545; color: white; padding: 15px; margin-bottom: 20px; border-radius: 5px;">
            <strong><i class="fas fa-exclamation-triangle me-2"></i>ATTORNEY USE ONLY:</strong>
            This worksheet helps evaluate hardship factors for waiver applications. Complete thoroughly to identify
            strongest arguments and evidence gaps. "Extreme hardship" must be significantly beyond normal hardship of separation.
        </div>

        <!-- Case Information -->
        <div class="section-title"><i class="fas fa-user me-2"></i>I. CASE INFORMATION</div>

        <table>
            <tr>
                <td style="width: 30%;"><strong>Applicant Name:</strong></td>
                <td><input type="text" name="applicantName"></td>
            </tr>
            <tr>
                <td><strong>A-Number:</strong></td>
                <td><input type="text" name="aNumber"></td>
            </tr>
            <tr>
                <td><strong>Qualifying Relative:</strong></td>
                <td><input type="text" name="qualifyingRelative"></td>
            </tr>
            <tr>
                <td><strong>Relationship:</strong></td>
                <td>
                    <label><input type="radio" name="relationship" value="spouse"> Spouse</label>
                    <label><input type="radio" name="relationship" value="parent"> Parent</label>
                </td>
            </tr>
            <tr>
                <td><strong>QR Status:</strong></td>
                <td>
                    <label><input type="radio" name="qrStatus" value="usc"> U.S. Citizen</label>
                    <label><input type="radio" name="qrStatus" value="lpr"> LPR</label>
                </td>
            </tr>
        </table>

        <!-- Medical Hardship -->
        <div class="section-title"><i class="fas fa-heartbeat me-2"></i>II. MEDICAL HARDSHIP FACTORS</div>

        <div class="subsection">
            <strong>A. Qualifying Relative's Medical Conditions</strong>
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="medChronic"> Chronic illness requiring ongoing treatment</label><br>
            <input type="text" name="medChronicDetails" placeholder="Specify condition, treatment, frequency">
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="medDisability"> Physical or mental disability</label><br>
            <input type="text" name="medDisabilityDetails" placeholder="Describe disability and care needs">
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="medMental"> Mental health conditions (depression, anxiety, PTSD)</label><br>
            <input type="text" name="medMentalDetails" placeholder="Diagnosis, treatment, impact">
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="medPregnancy"> Pregnancy or complications</label><br>
            <input type="text" name="medPregnancyDetails" placeholder="Details">
        </div>

        <p style="margin-top: 15px;"><strong>Impact if applicant removed:</strong></p>
        <textarea name="medImpact" placeholder="Who provides medical care? Transportation to appointments? Medication management? Emotional support during treatment? Would health deteriorate?"></textarea>

        <p style="margin-top: 15px;"><strong>Availability of treatment in home country:</strong></p>
        <textarea name="medCountry" placeholder="Is equivalent medical care available? Cost? Quality? Language barriers? Will QR be able to access treatment if relocated?"></textarea>

        <div class="subsection">
            <strong>Evidence Checklist:</strong>
        </div>
        <label><input type="checkbox" name="evMedDoctorLetter"> Doctor's letter/medical records</label><br>
        <label><input type="checkbox" name="evMedPrescriptions"> Prescription records</label><br>
        <label><input type="checkbox" name="evMedBills"> Medical bills</label><br>
        <label><input type="checkbox" name="evMedCountryResearch"> Country conditions - healthcare</label>

        <div class="score-box">
            Medical Hardship Strength:
            <label><input type="radio" name="medScore" value="weak"> Weak</label>
            <label><input type="radio" name="medScore" value="moderate"> Moderate</label>
            <label><input type="radio" name="medScore" value="strong"> Strong</label>
            <label><input type="radio" name="medScore" value="verystrong"> Very Strong</label>
        </div>

        <!-- Financial Hardship -->
        <div class="section-title"><i class="fas fa-dollar-sign me-2"></i>III. FINANCIAL HARDSHIP FACTORS</div>

        <table>
            <tr>
                <td><strong>Applicant's Annual Income:</strong></td>
                <td>$<input type="number" name="applicantIncome" style="width: 150px;"></td>
            </tr>
            <tr>
                <td><strong>QR's Annual Income:</strong></td>
                <td>$<input type="number" name="qrIncome" style="width: 150px;"></td>
            </tr>
            <tr>
                <td><strong>Total Household Expenses:</strong></td>
                <td>$<input type="number" name="expenses" style="width: 150px;"> /month</td>
            </tr>
            <tr>
                <td><strong>% of income lost if separated:</strong></td>
                <td><input type="number" name="incomeLoss" style="width: 80px;">%</td>
            </tr>
        </table>

        <div class="checklist-item">
            <label><input type="checkbox" name="finPrimaryEarner"> Applicant is primary/sole breadwinner</label>
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="finMortgage"> Mortgage/rent cannot be paid without applicant</label><br>
            <input type="text" name="finMortgageAmt" placeholder="Amount and consequences">
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="finDebts"> Significant debts or financial obligations</label><br>
            <input type="text" name="finDebtsDetails" placeholder="Student loans, medical debt, etc.">
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="finQRCantWork"> QR unable to work (disability, childcare needs, etc.)</label>
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="finChildren"> Financial impact on children (education, healthcare, basic needs)</label>
        </div>

        <p style="margin-top: 15px;"><strong>Employment prospects in home country:</strong></p>
        <textarea name="finCountryWork" placeholder="Could QR find work there? Salary level? Job market? Professional licensing issues? Economic conditions?"></textarea>

        <div class="subsection">
            <strong>Evidence Checklist:</strong>
        </div>
        <label><input type="checkbox" name="evFinTaxReturns"> Tax returns (3 years)</label><br>
        <label><input type="checkbox" name="evFinPaystubs"> Pay stubs</label><br>
        <label><input type="checkbox" name="evFinBankStatements"> Bank statements</label><br>
        <label><input type="checkbox" name="evFinMortgage"> Mortgage/rent statements</label><br>
        <label><input type="checkbox" name="evFinDebts"> Debt statements</label><br>
        <label><input type="checkbox" name="evFinCountryEcon"> Country economic research</label>

        <div class="score-box">
            Financial Hardship Strength:
            <label><input type="radio" name="finScore" value="weak"> Weak</label>
            <label><input type="radio" name="finScore" value="moderate"> Moderate</label>
            <label><input type="radio" name="finScore" value="strong"> Strong</label>
            <label><input type="radio" name="finScore" value="verystrong"> Very Strong</label>
        </div>

        <!-- Educational Hardship -->
        <div class="section-title"><i class="fas fa-graduation-cap me-2"></i>IV. EDUCATIONAL HARDSHIP</div>

        <div class="checklist-item">
            <label><input type="checkbox" name="eduChildren"> Impact on children's education</label><br>
            <textarea name="eduChildrenDetails" placeholder="Ages, grades, schools, special needs, language barriers, quality of education in home country"></textarea>
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="eduSpecialNeeds"> Children with learning disabilities/IEPs</label><br>
            <input type="text" name="eduSpecialNeedsDetails" placeholder="Describe needs and availability abroad">
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="eduQRSchool"> QR currently in school or professional training</label><br>
            <input type="text" name="eduQRDetails" placeholder="Program, timeline, impact of interruption">
        </div>

        <div class="subsection">
            <strong>Evidence Checklist:</strong>
        </div>
        <label><input type="checkbox" name="evEduRecords"> School records, report cards</label><br>
        <label><input type="checkbox" name="evEduIEP"> IEP documents</label><br>
        <label><input type="checkbox" name="evEduLetters"> Letters from teachers/counselors</label><br>
        <label><input type="checkbox" name="evEduCountry"> Education system research (home country)</label>

        <div class="score-box">
            Educational Hardship Strength:
            <label><input type="radio" name="eduScore" value="weak"> Weak</label>
            <label><input type="radio" name="eduScore" value="moderate"> Moderate</label>
            <label><input type="radio" name="eduScore" value="strong"> Strong</label>
            <label><input type="radio" name="eduScore" value="verystrong"> Very Strong</label>
        </div>

        <!-- Psychological Hardship -->
        <div class="section-title"><i class="fas fa-brain me-2"></i>V. PSYCHOLOGICAL/EMOTIONAL HARDSHIP</div>

        <div class="checklist-item">
            <label><input type="checkbox" name="psyDepression"> QR has depression, anxiety, or other mental health diagnosis</label><br>
            <input type="text" name="psyDepressionDetails" placeholder="Diagnosis, treatment, medications">
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="psyTrauma"> History of trauma or PTSD</label>
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="psyChildren"> Young children need both parents</label><br>
            <input type="text" name="psyChildrenDetails" placeholder="Ages and attachment/bonding issues">
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="psyCaregiving"> QR provides critical care for elderly/disabled family member in U.S.</label>
        </div>

        <textarea name="psyImpact" placeholder="Describe emotional/psychological impact of separation or relocation. How dependent is QR on applicant? Support systems that would be lost?"></textarea>

        <div class="subsection">
            <strong>Evidence Checklist:</strong>
        </div>
        <label><input type="checkbox" name="evPsyTherapist"> Therapist/psychologist letter</label><br>
        <label><input type="checkbox" name="evPsyRecords"> Mental health treatment records</label><br>
        <label><input type="checkbox" name="evPsyEvaluation"> Psychological evaluation</label><br>
        <label><input type="checkbox" name="evPsyAffidavits"> Family affidavits</label>

        <div class="score-box">
            Psychological Hardship Strength:
            <label><input type="radio" name="psyScore" value="weak"> Weak</label>
            <label><input type="radio" name="psyScore" value="moderate"> Moderate</label>
            <label><input type="radio" name="psyScore" value="strong"> Strong</label>
            <label><input type="radio" name="psyScore" value="verystrong"> Very Strong</label>
        </div>

        <!-- Country Conditions -->
        <div class="section-title"><i class="fas fa-globe-americas me-2"></i>VI. COUNTRY CONDITIONS</div>

        <div class="checklist-item">
            <label><input type="checkbox" name="countryViolence"> Violence, crime, political instability</label>
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="countryDiscrimination"> Discrimination or persecution</label>
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="countryEconomic"> Poor economic conditions, lack of opportunity</label>
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="countryHealthcare"> Inadequate healthcare infrastructure</label>
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="countryLanguage"> QR does not speak language</label>
        </div>

        <div class="checklist-item">
            <label><input type="checkbox" name="countryCultural"> Cultural adjustment difficulties for U.S. citizen/LPR</label>
        </div>

        <textarea name="countryDetails" placeholder="Detailed description of country conditions that would impact QR if relocated"></textarea>

        <div class="subsection">
            <strong>Evidence Checklist:</strong>
        </div>
        <label><input type="checkbox" name="evCountryState"> State Department reports</label><br>
        <label><input type="checkbox" name="evCountryHR"> Human rights reports</label><br>
        <label><input type="checkbox" name="evCountryNews"> News articles</label><br>
        <label><input type="checkbox" name="evCountryExpert"> Expert declaration</label>

        <div class="score-box">
            Country Conditions Hardship Strength:
            <label><input type="radio" name="countryScore" value="weak"> Weak</label>
            <label><input type="radio" name="countryScore" value="moderate"> Moderate</label>
            <label><input type="radio" name="countryScore" value="strong"> Strong</label>
            <label><input type="radio" name="countryScore" value="verystrong"> Very Strong</label>
        </div>

        <!-- Overall Assessment -->
        <div class="section-title"><i class="fas fa-balance-scale me-2"></i>VII. OVERALL HARDSHIP ASSESSMENT</div>

        <p><strong>Cumulative hardship analysis:</strong></p>
        <textarea name="cumulativeAnalysis" rows="6" placeholder="Explain how all factors combine to create extreme hardship. Show that hardship exists whether QR stays in U.S. OR relocates to home country. Address both scenarios."></textarea>

        <p><strong>Gaps in evidence:</strong></p>
        <textarea name="evidenceGaps" placeholder="What additional evidence is needed?"></textarea>

        <p><strong>Weaknesses to address:</strong></p>
        <textarea name="weaknesses" placeholder="What are the weak points in this case? How can they be strengthened?"></textarea>

        <div class="score-box" style="background: #f1f5f9; border-color: #94a3b8; font-size: 18px;">
            <strong>OVERALL CASE STRENGTH:</strong><br>
            <label><input type="radio" name="overallScore" value="weak"> Weak - Unlikely to succeed</label>
            <label><input type="radio" name="overallScore" value="moderate"> Moderate - 50/50 chance</label>
            <label><input type="radio" name="overallScore" value="strong"> Strong - Good chance</label>
            <label><input type="radio" name="overallScore" value="verystrong"> Very Strong - Likely approval</label>
        </div>

        <p style="margin-top: 20px;"><strong>Attorney Notes/Strategy:</strong></p>
        <textarea name="attorneyNotes" rows="5" placeholder="Case strategy, key arguments to emphasize, client counseling notes"></textarea>
    </div>

    <script>
        // Auto-save functionality
        const inputs = document.querySelectorAll('input[name], textarea[name]');

        inputs.forEach(input => {
            const saved = localStorage.getItem('hardshipws_' + input.name);
            if (saved && input.type !== 'radio' && input.type !== 'checkbox') {
                input.value = saved;
            } else if (saved && input.type === 'radio' && input.value === saved) {
                input.checked = true;
            } else if (saved && input.type === 'checkbox') {
                input.checked = saved === 'true';
            }

            input.addEventListener('input', function() {
                if (input.type === 'radio') {
                    localStorage.setItem('hardshipws_' + input.name, input.value);
                } else if (input.type === 'checkbox') {
                    localStorage.setItem('hardshipws_' + input.name, input.checked);
                } else {
                    localStorage.setItem('hardshipws_' + input.name, input.value);
                }
            });

            input.addEventListener('change', function() {
                if (input.type === 'radio' || input.type === 'checkbox') {
                    localStorage.setItem('hardshipws_' + input.name, input.type === 'checkbox' ? input.checked : input.value);
                }
            });
        });


        // Share functionality
        function toggleShareMenu() {
            const menu = document.getElementById('shareMenu');
            menu.classList.toggle('active');
        }

        // Close share menu when clicking outside
        document.addEventListener('click', function(event) {
            const menu = document.getElementById('shareMenu');
            const shareButton = event.target.closest('.btn-action');

            if (!menu.contains(event.target) && !shareButton?.textContent.includes('Share')) {
                menu.classList.remove('active');
            }
        });

        function shareOn(platform) {
            const url = encodeURIComponent(window.location.href);
            const title = encodeURIComponent('Extreme Hardship Worksheet Template');
            const text = encodeURIComponent('Check out this helpful Extreme Hardship Worksheet template for immigration applications');

            let shareUrl;

            switch(platform) {
                case 'linkedin':
                    shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${url}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${text}`;
                    break;
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
                    break;
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${text}%20${url}`;
                    break;
                case 'email':
                    shareUrl = `mailto:?subject=${title}&body=${text}%20${url}`;
                    break;
            }

            if (shareUrl) {
                window.open(shareUrl, '_blank', 'width=600,height=400');
            }

            toggleShareMenu();
            return false;
        }

        function copyLink() {
            const url = window.location.href;

            if (navigator.clipboard) {
                navigator.clipboard.writeText(url).then(function() {
                    // Show success message
                    const copyBtn = event.target.closest('.share-option');
                    const originalText = copyBtn.querySelector('span').textContent;
                    copyBtn.querySelector('span').textContent = 'Copied!';
                    copyBtn.style.color = '#10b981';

                    setTimeout(function() {
                        copyBtn.querySelector('span').textContent = originalText;
                        copyBtn.style.color = '';
                    }, 2000);
                });
            } else {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = url;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('Link copied to clipboard!');
            }

            return false;
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>
